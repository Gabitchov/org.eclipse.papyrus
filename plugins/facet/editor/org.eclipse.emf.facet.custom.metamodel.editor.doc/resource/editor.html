<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head><body><h1 id="CustomizationofmodelwithEMFFacet">Customization of model with EMF Facet</h1><ol class="toc" style="list-style: none;"><li><a href="#CustomizationofmodelwithEMFFacet">Customization of model with EMF Facet</a></li><li><a href="#Creationof.customfile">Creation of .custom file</a></li><li><a href="#EClassCustomandFacetCustom">EClassCustom and FacetCustom</a><ol style="list-style: none;"><li><a href="#Creationandbasicedition">Creation and basic edition</a></li><li><a href="#Finetuneedition">Fine-tune edition</a></li></ol></li><li><a href="#DerivedTypedElement">DerivedTypedElement</a><ol style="list-style: none;"><li><a href="#Creationandbasicedition2">Creation and basic edition</a></li><li><a href="#Structuredviews">Structured views</a></li><li><a href="#Finetuneedition2">Fine-tune edition</a></li></ol></li></ol><p>EMF Facet provides a customization component, that can be used to define the appearance of model elements when viewed in an editor or view that supports this customization mechanism.</p><h1 id="Creationof.customfile">Creation of .custom file</h1><p>A customization is defined in a model that conforms to the EMF Facet customization metamodel. This model is saved in a file with the &#171;.custom&#187; file extension. The file can be created via a wizard in Eclipse from “New -&gt; EMF Facet -&gt; Create a customization 0.2” option in menu and will prompt the user for the nsURI and prefix for the customization model. The following screen captures show step by step the creation process :</p><p><img border="0" src="WizardCreation1.png"/><br/>Figure 1 : custom file creation wizard</p><p><img border="0" src="WizardCreation2.png"/><br/>Figure 2 : file name selection</p><p><img border="0" src="WizardCreation2.png"/><br/>Figure 3 : nsURI and prefix specification for the model</p><p>Upon the creation of the customization model file, the editor will open and allow the user to populate the model:</p><p><img border="0" src="EditorWithEmptyFile.png"/><br/>Figure 4 : empty Customization created from the wizard</p><p>Customization is a specific FacetSet acting as the main container for the customization elements. These elements may be customization for<br/>EClass or Facet; each of them containing DerivedTypedElement such as FacetAttribute, FacetReference, and FacetOperation.</p><h1 id="EClassCustomandFacetCustom">EClassCustom and FacetCustom</h1><h2 id="Creationandbasicedition">Creation and basic edition</h2><p>Custom classes can be created when a Customization element is selected, the far right panel displays buttons to ease the creation of such<br/>elements:</p><p><img border="0" src="EClassCustomCreation1.png"/><br/>Figure 5 : creation of an EClassCustom</p><p>The dialog allows specifying generic features for Custom classes and the properties view is always there to fine-tune different features:</p><p><img border="0" src="EClassCustomEdition.png"/><br/>Figure 6 : Edition of an EClassCustom</p><p>In this example, the EClassCustom extends the metaclass from the org.eclipse.emf.facet.examples.library metamodel, the editor will<br/>automatically load every model in which a facet specifies this metamodel, hence the loading of .efacet and .custom files available in the<br/>platform. This allow an easy access of all declared facets bound to an element of the customized metamodel.</p><p>The process is identical for the creation of a FacetCustom:</p><p><img border="0" src="FacetCustomCreation1.png"/><br/>Figure 7 : creation of a FacetCustom</p><h2 id="Finetuneedition">Fine-tune edition</h2><p>If needed, properties view allows the user to have a more advanced control on custom elements:</p><p><img border="0" src="FineTuneEClassCustomization.png"/><br/>Figure 8 : fine-tune edition of an EClassCustom</p><p>Also, applied customization are strongly affected by the order the manager load them up, the editor provides a way to modify this order by<br/>selecting an element and press either the “Up” or “Down” bottom. This results in modifying the index of the selected element in its<br/>containment list.</p><h1 id="DerivedTypedElement">DerivedTypedElement</h1><h2 id="Creationandbasicedition2">Creation and basic edition</h2><p>Custom element, either ECLassCustom or FacetCustom, contains DerivedTypeElement. Those elements can be FacetAttribute, FacetReference or<br/>FacetOperation. The most used lement for Customization is the FacetOperation: each of these FacetOperations overrides the FacetOperation<br/>corresponding to the customizable feature you want to customize: label, font, color, etc…<br/>In order to create a FacetOperation, a FacetCustom or an EClassCustom must be selected:</p><p><img border="0" src="FacetOperationCreation1.png"/><br/>Figure 9 : creation of a FacetOperation</p><p>Finally, the user must provide an implementation for an overriding FacetOperation, by the means of a Query that will return the value of the<br/>customization when this Query is evaluated on a model element that conforms to the extendedFacet. If the query has not been written yet, the<br/>wizard provides an easy wizard to create the Query directly extending one of the Query class available, or the editor will scan the project<br/>and prompt the user to choose among a list of available query classes.</p><p><img border="0" src="FacetOperationSpecifyQuery.png"/><br/>Figure 10 : Creation of a Query for a FacetOperation</p><p>If a FacetOperation is selected, it is possible to add parameters. This parameter is useful for customizing the structural feature<br/>corresponding to a single customized model element:</p><p><img border="0" src="addParameter.png"/><br/>Figure 11 : adding a parameter to a FacetOperation</p><h2 id="Structuredviews">Structured views</h2><p>The left tree is the main navigator of the model in the editor, when a Custom element is selected or any DerivedTypeElement, the right panel<br/>shows the list of all child derivedTypeElements, or brother depending on the nature of the left panel selection. This panel offers a quick<br/>overview of the DerivedTypeElement:</p><p><img border="0" src="RightPaneldescription.png"/><br/>Figure 12 : detailed view of the right panel</p><p>An icon symbolizes the override customization facet, all icons are as follow:</p><ul><li><img border="0" src="attributes.gif"/> means the derivedTypeElement is not a FacetOperation</li><li><img border="0" src="customizationLabel.png"/> stands for “label”</li><li><img border="0" src="fontBold.png"/> stands for “isBold”</li><li><img border="0" src="fontItalic.bmp"/> stands for “isItalic”</li><li><img border="0" src="fontName.png"/> stands for “fontName”</li><li><img border="0" src="fontSize.png"/> stands for “fontSize”</li><li><img border="0" src="fontStrukethrough.bmp"/> stands for “isStrikethrough”</li><li><img border="0" src="fontUnderline.bmp"/> stands for “isUnderlined”</li><li><img border="0" src="imageCustomization.png"/> stands for “image”</li><li><img border="0" src="rgb.png"/> stands for “foreground” or “background”</li><li><img border="0" src="middleLeftOverlay.png"/> stands for “middleLeftOverlay”</li><li><img border="0" src="middleRightOverlay.png"/> stands for “middleRightOverlay”</li><li><img border="0" src="topLeftOverlay.png"/> stands for “topLeftOverlay”</li><li><img border="0" src="topMiddleOverlay.png"/> stands for “topMiddleOverlay”</li><li><img border="0" src="topRightOverlay.png"/> stands for “topRightOverlay”</li><li><img border="0" src="bottomRightOverlay.png"/> stands for “bottomRightOverlay”</li><li><img border="0" src="bottomMiddleOverlay.png"/> stands for “bottomMiddleOverlay”</li><li><img border="0" src="bottomLeftOverlay.png"/> stands for “bottomLeftOverlay”</li></ul><h2 id="Finetuneedition2">Fine-tune edition</h2><p>An advanced control of FacetOperation, and moreover DerivedTypeElement, is available via the properties view:</p><p><img border="0" src="facetOperationWithPropertiesView.png"/><br/>Figure 13 : fine-tune edition of a FacetOperation</p></body></html>